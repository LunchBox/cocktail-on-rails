
<div class="my-4">
  <%= render "items/breadcrumbs", item: @item %>
</div>

<div class="my-4">
	<%= render "items/labels", item: @item %>
</div>

<div class="my-4">
  <h1 class="text-2xl"><%= @item.name %></h1>
  <div class="text-sm text-gray-400">
		<%= @item.user %> &middot;
		<span>
			<%= @item.involved_ingredient_size %> cocktails
		</span>
  </div>
</div>


<div class="my-4 flex">
  <%= link_to "Edit", [:edit, @item], class: "btn btn--light mr-1" %>
  <%= link_to "Edit Labels", [:edit_labels, @item], class: "btn btn--light mr-1" %>

	<% if mark = current_user.has_ingredient?(@item) %>
		<%= button_to "In My Bar", mark, method: :delete, class: "btn btn--light mr-1", form: {data: {}} %>
	<% else %>
		<%= button_to "+ Add to My Bar", [:marks, markable_type: "Item", markable_id: @item.id, context: 'ingredient'], class: "btn btn--light mr-1", method: :post %>
	<% end %>
  <%= button_to "Delete", @item, method: :delete, class: "btn btn--light", form: {data: {turbo_confirm: "Are you sure?"}} %>
</div>

<div class="my-4 flex">
  <% if @item.cover_image.attached? %>
    <div class="recipe__thumb">
      <%= image_tag @item.cover_image.variant(:thumb) %>
    </div>
  <% end %>
</div>

<h3 class="my-4 mt-8 text-xl">Recipes</h3>
<div class="my-4">
  <% @item.involved_ingredients.each do |ingredient| %>
    <div class="py-1 border-b last:border-b-0"> 
      <%= link_to ingredient.recipe %>
    </div>
  <% end %>
</div>

<h2 class="my-4 font-bold">Comments</h2>

<div class="my-4">
	<% @commentable = @item %>
  <%= render "comments/form", comment: Comment.new %>
</div>

<div class="my-4">
	<%= render @item.comments.recent %>
</div>
